{"ast":null,"code":"import _slicedToArray from\"/Users/273488/Workspace/My Repo/Code Reference/MyPics/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{createClient}from\"contentful\";import Clouds from\"../templates/clouds/Clouds\";import DriftingClouds from\"../templates/clouds/DriftingClouds\";import HeavyRain from\"../templates/rain/HeavyRain\";import SplashRain from\"../templates/rain/SplashRain\";import{jsx as _jsx}from\"react/jsx-runtime\";var SPACE_ID=\"jbuh6ffk2dc1\";var ACCESS_TOKEN=\"vIgkWsaGQS-aMGClV9awdFmf4JM-3NEL9yqennzrHKA\";var client=createClient({space:SPACE_ID,accessToken:ACCESS_TOKEN});export default function FetchContent(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),entries=_useState2[0],setEntries=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),urls=_useState4[0],setURLs=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),url=_useState6[0],setURL=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),pointer=_useState8[0],setPointer=_useState8[1];var index=0;useEffect(function(){client.getEntries().then(function(response){return setEntries(response.items);}).catch(console.error);},[]);useEffect(function(){console.log(entries);getURL();},[entries]);useEffect(function(){console.log(\"Pointer: \",pointer);loadImage();},[pointer]);useEffect(function(){var interval=setInterval(function(){increment();},5000);return function(){return clearInterval(interval);};},[]);function increment(){index++;console.log(index);if(index>=(urls===null||urls===void 0?void 0:urls.length)){index=0;}setPointer(index);}function loadImage(){// console.log('Pointer: ',pointer)\nsetURL(urls[pointer]);}function getURL(){var _entries$,_entries$$fields;var img=(_entries$=entries[0])===null||_entries$===void 0?void 0:(_entries$$fields=_entries$.fields)===null||_entries$$fields===void 0?void 0:_entries$$fields.defaultImages;if(img){for(var key in img){urls.push(img[key].fields.file.url);// setURLs(...urls, img[key].fields.file.url);\nconsole.log(img[key].fields.file.url);}}}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(HeavyRain,{url:\"https:\".concat(url)})});}","map":{"version":3,"sources":["/Users/273488/Workspace/My Repo/Code Reference/MyPics/src/contentful/FetchContent.js"],"names":["useState","useEffect","createClient","Clouds","DriftingClouds","HeavyRain","SplashRain","SPACE_ID","ACCESS_TOKEN","client","space","accessToken","FetchContent","entries","setEntries","urls","setURLs","url","setURL","pointer","setPointer","index","getEntries","then","response","items","catch","console","error","log","getURL","loadImage","interval","setInterval","increment","clearInterval","length","img","fields","defaultImages","key","push","file"],"mappings":"2IAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,YAAT,KAA6B,YAA7B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,oCAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,C,2CAEA,GAAMC,CAAAA,QAAQ,CAAG,cAAjB,CAEA,GAAMC,CAAAA,YAAY,CAAG,6CAArB,CAEA,GAAMC,CAAAA,MAAM,CAAGP,YAAY,CAAC,CAC1BQ,KAAK,CAAEH,QADmB,CAE1BI,WAAW,CAAEH,YAFa,CAAD,CAA3B,CAKA,cAAe,SAASI,CAAAA,YAAT,EAAwB,CACrC,cAA8BZ,QAAQ,CAAC,EAAD,CAAtC,wCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAAwBd,QAAQ,CAAC,EAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eACA,eAAsBhB,QAAQ,CAAC,EAAD,CAA9B,yCAAOiB,GAAP,eAAYC,MAAZ,eACA,eAA8BlB,QAAQ,CAAC,CAAD,CAAtC,yCAAOmB,OAAP,eAAgBC,UAAhB,eACA,GAAIC,CAAAA,KAAK,CAAC,CAAV,CAEApB,SAAS,CAAC,UAAM,CACdQ,MAAM,CACHa,UADH,GAEGC,IAFH,CAEQ,SAACC,QAAD,QAAcV,CAAAA,UAAU,CAACU,QAAQ,CAACC,KAAV,CAAxB,EAFR,EAGGC,KAHH,CAGSC,OAAO,CAACC,KAHjB,EAID,CALQ,CAKN,EALM,CAAT,CAOA3B,SAAS,CAAC,UAAM,CACd0B,OAAO,CAACE,GAAR,CAAYhB,OAAZ,EACAiB,MAAM,GACP,CAHQ,CAGN,CAACjB,OAAD,CAHM,CAAT,CAMAZ,SAAS,CAAC,UAAM,CACd0B,OAAO,CAACE,GAAR,CAAY,WAAZ,CAAwBV,OAAxB,EACAY,SAAS,GACV,CAHQ,CAGN,CAACZ,OAAD,CAHM,CAAT,CAKAlB,SAAS,CAAC,UAAM,CACd,GAAM+B,CAAAA,QAAQ,CAAGC,WAAW,CAAC,UAAM,CAEjCC,SAAS,GACV,CAH2B,CAGzB,IAHyB,CAA5B,CAIA,MAAO,kBAAMC,CAAAA,aAAa,CAACH,QAAD,CAAnB,EAAP,CACD,CANQ,CAMN,EANM,CAAT,CAQA,QAASE,CAAAA,SAAT,EAAoB,CACpBb,KAAK,GACHM,OAAO,CAACE,GAAR,CAAYR,KAAZ,EACE,GAAIA,KAAK,GAAIN,IAAJ,SAAIA,IAAJ,iBAAIA,IAAI,CAAEqB,MAAV,CAAT,CAA2B,CACzBf,KAAK,CAAC,CAAN,CACD,CACDD,UAAU,CAACC,KAAD,CAAV,CACH,CAED,QAASU,CAAAA,SAAT,EAAqB,CACnB;AACAb,MAAM,CAACH,IAAI,CAACI,OAAD,CAAL,CAAN,CAED,CAED,QAASW,CAAAA,MAAT,EAAkB,gCAChB,GAAIO,CAAAA,GAAG,YAAGxB,OAAO,CAAC,CAAD,CAAV,sDAAG,UAAYyB,MAAf,2CAAG,iBAAoBC,aAA9B,CAEA,GAAIF,GAAJ,CAAS,CACP,IAAK,GAAIG,CAAAA,GAAT,GAAgBH,CAAAA,GAAhB,CAAqB,CACnBtB,IAAI,CAAC0B,IAAL,CAAUJ,GAAG,CAACG,GAAD,CAAH,CAASF,MAAT,CAAgBI,IAAhB,CAAqBzB,GAA/B,EACA;AACAU,OAAO,CAACE,GAAR,CAAYQ,GAAG,CAACG,GAAD,CAAH,CAASF,MAAT,CAAgBI,IAAhB,CAAqBzB,GAAjC,EACD,CACF,CACF,CAED,mBACE,kCACE,KAAC,SAAD,EAAW,GAAG,iBAAWA,GAAX,CAAd,EADF,EADF,CAKD","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { createClient } from \"contentful\";\n\nimport Clouds from \"../templates/clouds/Clouds\";\nimport DriftingClouds from \"../templates/clouds/DriftingClouds\";\nimport HeavyRain from \"../templates/rain/HeavyRain\";\nimport SplashRain from \"../templates/rain/SplashRain\";\n\nconst SPACE_ID = \"jbuh6ffk2dc1\";\n\nconst ACCESS_TOKEN = \"vIgkWsaGQS-aMGClV9awdFmf4JM-3NEL9yqennzrHKA\";\n\nconst client = createClient({\n  space: SPACE_ID,\n  accessToken: ACCESS_TOKEN,\n});\n\nexport default function FetchContent() {\n  const [entries, setEntries] = useState([]);\n  const [urls, setURLs] = useState([]);\n  const [url, setURL] = useState(\"\");\n  const [pointer, setPointer] = useState(0);\n  let index=0;\n\n  useEffect(() => {\n    client\n      .getEntries()\n      .then((response) => setEntries(response.items))\n      .catch(console.error);\n  }, []);\n\n  useEffect(() => {\n    console.log(entries);\n    getURL();\n  }, [entries]);\n\n\n  useEffect(() => {\n    console.log(\"Pointer: \",pointer);\n    loadImage();\n  }, [pointer]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      \n      increment();\n    }, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  function increment(){\n  index ++;\n    console.log(index);\n      if (index >= urls?.length) {\n        index=0;\n      }\n      setPointer(index);\n  }\n\n  function loadImage() {\n    // console.log('Pointer: ',pointer)\n    setURL(urls[pointer]);\n    \n  }\n  \n  function getURL() {\n    let img = entries[0]?.fields?.defaultImages;\n\n    if (img) {\n      for (let key in img) {\n        urls.push(img[key].fields.file.url);\n        // setURLs(...urls, img[key].fields.file.url);\n        console.log(img[key].fields.file.url);\n      }\n    }\n  }\n\n  return (\n    <div>\n      <HeavyRain url={`https:${url}`} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}